---
title: "Summarise RepAdapt Metadata"
author: "James Whiting"
date: "27/04/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Basic summaries...
Summary of metadata stored in `metadata/sample_species_vcf_author_map_v2_210427.csv`

```{r Read in}
# Read in metadata
metadata <- read.csv("~/Calgary/RepAdapt/metadata/sample_species_vcf_author_map_v2_210427.csv")
```

## Perform filtering
Currently the metadata includes various data that are not usable. For e.g. the VCF is missing, or individual IDs are missing. For now, we will just remove cases with missing VCFs...
```{r filter}
metadata <- metadata[grep("vcf.gz",metadata$VCF),]
```

The species list is derived from the filtered metadata
```{r save species list}
write.table(data.frame(unique(metadata$Taxon_name)),
            "~/Calgary/RepAdapt/metadata/filtered_species_list.txt",
            row.names = F,quote = F,sep = "\t",col.names = F)
```

## Count up various bits of info

```{r Counts of inds etc, echo=FALSE}
cat(paste0("Data includes ",length(metadata[metadata$Data_type != "PoolSeq","Sample_name"])," individuals and ",length(metadata[metadata$Data_type == "PoolSeq","Sample_name"]), " Poolseq pools"))
cat(paste0("Data includes ",length(unique(metadata$Taxon_name))," species"))
cat(paste0("Data includes ",length(unique(metadata$VCF))," VCF files"))

```

